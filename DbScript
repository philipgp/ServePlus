create table USER(
ID int  PRIMARY KEY, 
FIRST_NAME VARCHAR2(30),
MIDDLE_NAME VARCHAR2(30),
LAST_NAME VARCHAR2(30)
CREATED_DATE DATE,
LAST_MODIFIED_DATE DATE
);



create table customer(
 ID INT PRIMARY KEY,
  USER_ID INT REFERENCES USER(ID),
  CREATED_DATE DATE,
LAST_MODIFIED_DATE DATE);



CREATE TABLE COMPANY(
ID INT PRIMARY KEY,
NAME VARCHAR2(50),
CREATED_DATE DATE,
LAST_MODIFIED_DATE DATE
);
create table ASSIGNER( 
ID INT PRIMARY KEY , 
USER_ID INT REFERENCES USER(ID),
COMPANY_ID INT REFERENCES COMPANY(ID),
CREATED_DATE DATE,
LAST_MODIFIED_DATE DATE
);
create table CATEGORY( 
ID INT PRIMARY KEY, 
NAME VARCHAR2(50),
CREATED_DATE DATE,
LAST_MODIFIED_DATE DATE
);
create table SERVICE(
 ID INT PRIMARY KEY,
  NAME VARCHAR2(50),
   CATEGORY_ID INT REFERENCES CATEGORY(ID),
   CREATED_DATE DATE,
LAST_MODIFIED_DATE DATE
   );
create table COMPANY_SERVICE( 
COMPANY_ID INT REFERENCES COMPANY(ID),
 SERVICE_ID INT REFERENCES SERVICE(ID),
 ACTIVE BOOLEAN,
DEFAULT BOOLEAN,
 PRIMARY KEY(COMPANY_ID,SERVICE_ID),
 CREATED_DATE DATE,
LAST_MODIFIED_DATE DATE);

create table LOCATION(
ID int  primary key PRIMARY KEY, 
LATITIDE VARCHAR2(20),
LONGITUDE  VARCHAR2(20),
CREATED_DATE DATE,
LAST_MODIFIED_DATE DATE
); 



create table ADDRESS(
ID int  PRIMARY KEY, 
FIRST_LINE VARCHAR2(20),
SECOND_LINE VARCHAR2(20),
LOCATION_ID INT REFERENCES LOCATION(ID),
CREATED_DATE DATE,
LAST_MODIFIED_DATE DATE
); 


create table SR_ACTION_HISTORY(
ID int   PRIMARY KEY, 
SERVICE_REQUEST_ID INT REFERENCES SERVICE_REQUEST(ID),
ACTION VARCHAR2(30),
CREATED_DATE DATE,
LAST_MODIFIED_DATE DATE
);

create table WORKER( 
ID INT PRIMARY KEY , 
USER_ID INT REFERENCES USER(ID),
COMPANY_ID INT REFERENCES COMPANY(ID),
CREATED_DATE DATE,
LAST_MODIFIED_DATE DATE);

create table USER_ADDRESS( 
USER_ID INT REFERENCES USER(ID), 
ADDRESS_ID INT REFERENCES ADDRESS(ID),
ACTIVE BOOLEAN,
DEFAULT BOOLEAN,
PRIMARY KEY(USER_ID ,ADDRESS_ID ),
CREATED_DATE DATE,
LAST_MODIFIED_DATE DATE);

create table COMPANY_ADDRESS( 
COMPANY_ID INT REFERENCES USER(ID), 
ADDRESS_ID INT REFERENCES ADDRESS(ID),
ACTIVE BOOLEAN,
DEFAULT BOOLEAN,
PRIMARY KEY(COMPANY_ID ,ADDRESS_ID ),
CREATED_DATE DATE,
LAST_MODIFIED_DATE DATE
);

CREATE TABLE SERVICE_REQUEST( 
ID INT PRIMARY KEY,
SERVICE_ID INT REFERENCES SERVICE(ID),
CUSTOMER_ID INT REFERENCES CUSTOMER(ID),
ASSIGNER_ID INT REFERENCES ASSIGNER(ID),
WORKER_ID INT REFERENCES WORKER(ID),
ADDRESS_ID INT REFERENCES ADDRESS(ID),
STATUS VARCHAR2(20),
CREATED_DATE DATE,
LAST_MODIFIED_DATE DATE);

CREATE TABLE SR_ATTACHMENTS ( ID INT PRIMARY KEY,
SERVICE_REQUEST_ID INT REFERENCES SERVICE_REQUEST(ID),
ATT_FILE_NAME VARCHAR2(30),
FILE_TYPE VARCHAR2(30),
BINARY BLOB,
CREATED_DATE DATE,
LAST_MODIFIED_DATE DATE)

create table CONTACT_DETAIL(
ID int  PRIMARY KEY, 
TYPE  VARCHAR2(30),
VALUE  VARCHAR2(30),
CREATED_DATE DATE,
LAST_MODIFIED_DATE DATE
);

create table SR_CONTACT(
SR_ID INT REFERENCES SERVICE_REQUEST(ID), 
CONTACT_DETAIL_ID INT REFERENCES CONTACT_DETAIL(ID),
PRIMARY KEY(SR_ID,CONTACT_DETAIL_ID ),
CREATED_DATE DATE,
LAST_MODIFIED_DATE DATE
);

create table CUSTOMER_CONTACT(
CUSTOMER_ID INT REFERENCES CUSTOMER(ID), 
CONTACT_DETAIL_ID INT REFERENCES CONTACT_DETAIL(ID),
ACTIVE BOOLEAN,
DEFAULT BOOLEAN,
PRIMARY KEY(CUSTOMER_ID ,CONTACT_DETAIL_ID ),
CREATED_DATE DATE,
LAST_MODIFIED_DATE DATE
);

